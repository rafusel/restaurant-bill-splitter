(this["webpackJsonprestaurant-bill-splitter"]=this["webpackJsonprestaurant-bill-splitter"]||[]).push([[0],{108:function(e,t,r){},224:function(e,t,r){"use strict";r.r(t);var a=r(10),s=r(0),i=r.n(s),n=r(22),l=r.n(n),c=r(61),o=r(62),d=r(71),p=r(68),u=(r(108),r(139)),h=r(228),m=r(229),j=r(33),b=r(232),v=r(234),O=r(233);function f(e){var t={backgroundColor:e.backgroundColor,borderRadius:"10px",color:"white",fontSize:"25px",padding:"5px 15px 5px 15px",margin:"0 10px 10px 0",display:"inline-flex",alignItems:"center"};return Object(a.jsxs)("span",{style:t,children:[Object(a.jsx)(b.a,{style:{marginRight:"5px"}}),e.name,Object(a.jsx)(j.a,{type:"primary",onClick:e.handleDelete,style:{marginLeft:"20px"},children:Object(a.jsx)(O.a,{})})]})}var x=h.a.Title;function g(e){var t=e.orderers.map((function(t,r){return Object(a.jsx)(f,{name:t.name,backgroundColor:t.color,handleDelete:function(){e.deleteOrderer(r)}})})),r=Object(s.useState)(""),i=Object(u.a)(r,2),n=i[0],l=i[1],c=function(){l(""),e.addOrderer(n)};return Object(a.jsxs)("div",{style:{marginTop:"60px"},children:[Object(a.jsx)(x,{level:2,children:"Orderer Details"}),Object(a.jsx)(x,{level:5,children:"Add Orderer"}),Object(a.jsx)(m.a,{size:"large",placeholder:"Orderer name",prefix:Object(a.jsx)(b.a,{}),value:n,onChange:function(e){l(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&c()},suffix:Object(a.jsx)(j.a,{type:"primary",onClick:c,children:Object(a.jsx)(v.a,{})}),className:"mb-15"}),t]})}var y=r(51),I=r(80),C=r(137),M=r(230),S=r(231),F=r(227),k=r(235),N=r(236),D=function(e){return e.replace(/[^0-9.]/g,"")},T=h.a.Title,w=I.a.Option,U=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).state={name:"",cost:"",orderer:"changeme",isModalVisible:!1},a.handleMealCostUpdate=a.handleMealCostUpdate.bind(Object(y.a)(a)),a.handleMealNameUpdate=a.handleMealNameUpdate.bind(Object(y.a)(a)),a.handleMealOrdererUpdate=a.handleMealOrdererUpdate.bind(Object(y.a)(a)),a.addMealItem=a.addMealItem.bind(Object(y.a)(a)),a.deleteMealItem=a.deleteMealItem.bind(Object(y.a)(a)),a}return Object(o.a)(r,[{key:"getColumns",value:function(){var e=this;return[{title:"Item",dataIndex:"name",key:"name"},{title:"Price",dataIndex:"cost",key:"cost"},{title:"Orderer",dataIndex:"orderer",key:"orderer"},{title:"Delete",dataIndex:"deleteFunction",render:function(t,r){return Object(a.jsx)(j.a,{type:"primary",onClick:function(){e.deleteMealItem(r.index)},children:Object(a.jsx)(O.a,{})})}}]}},{key:"handleMealNameUpdate",value:function(e){this.setState({name:e.target.value})}},{key:"handleMealCostUpdate",value:function(e){this.setState({cost:this.formatCurrencyString(this.state.cost,e.target.value)})}},{key:"handleMealOrdererUpdate",value:function(e){this.setState({orderer:e})}},{key:"addMealItem",value:function(){"changeme"!==this.state.orderer?(this.setState({name:"",orderer:"changeme",cost:"",isModalVisible:!1}),this.props.addMealItem(this.state)):C.b.error("Change the orderer for this meal item.")}},{key:"deleteMealItem",value:function(e){this.props.deleteMealItem(e)}},{key:"removeAllNonDigits",value:function(e){return e.replace(/\D/g,"")}},{key:"processCurrencyDecimals",value:function(e){return this.removeAllNonDigits(e).slice(0,2)}},{key:"processCurrencyWholeDollars",value:function(e){return this.addCurrencyCommas(this.removeAllNonDigits(e))}},{key:"addCurrencyCommas",value:function(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"formatCurrencyString",value:function(e,t){var r=t.trim(),a=e.includes("."),s=r.includes(".");if(""===this.removeAllNonDigits(r))return"";if(a&&s){var i=r.split(".");return"$ ".concat(this.processCurrencyWholeDollars(i[0]),".").concat(this.processCurrencyDecimals(i[1]))}return s?"$ ".concat(this.processCurrencyWholeDollars(r),"."):"$ ".concat(this.processCurrencyWholeDollars(r))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{style:{marginTop:"30px"},children:[Object(a.jsx)(T,{level:2,children:"Order Details"}),Object(a.jsxs)(j.a,{type:"primary",size:"large",onClick:function(){e.setState({isModalVisible:!0})},className:"mb-15",children:["Add Meal Item",Object(a.jsx)(v.a,{})]}),Object(a.jsx)(M.a,{title:"Add Meal Item",visible:this.state.isModalVisible,okText:"Add Meal Item",onOk:this.addMealItem,onCancel:function(){e.setState({isModalVisible:!1})},children:Object(a.jsxs)(S.b,{direction:"vertical",className:"w-100-percent",children:[Object(a.jsx)(m.a,{value:this.state.name,onChange:this.handleMealNameUpdate,suffix:Object(a.jsx)(k.a,{}),size:"large",placeholder:"Meal item name",className:"w-100-percent"}),Object(a.jsx)(m.a,{value:this.state.cost,onChange:this.handleMealCostUpdate,suffix:Object(a.jsx)(N.a,{}),size:"large",placeholder:"Meal item price",className:"w-100-percent"}),Object(a.jsxs)(I.a,{style:{width:"100%"},size:"large",value:this.state.orderer,className:"w-100-percent",onChange:this.handleMealOrdererUpdate,children:[Object(a.jsx)(w,{value:"changeme",children:"Orderer"}),this.props.orderers.map((function(e,t){return Object(a.jsx)(w,{value:e.name,children:e.name})}))]})]})}),!!this.props.receipt.mealItems.length&&Object(a.jsx)(F.a,{dataSource:this.props.receipt.mealItems.map((function(e,t){e.index=t;var r=D(e.cost),a=parseFloat(r);return e.cost="$".concat(a.toFixed(2)),e})),columns:this.getColumns(),pagination:!1,className:"mb-15"},this.props.receipt.mealItems),Object(a.jsx)(T,{level:5,children:"Total"}),Object(a.jsx)(m.a,{value:this.props.receipt.total.toString(),onChange:function(t){e.props.updateTotal(e.formatCurrencyString(e.props.receipt.total,t.target.value))},size:"large",placeholder:"$ 0.00",suffix:Object(a.jsx)(N.a,{}),className:"mb-15 max-w-300"}),Object(a.jsx)(T,{level:5,children:"Delivery Fee"}),Object(a.jsx)(m.a,{value:this.props.receipt.deliveryFee.toString(),onChange:function(t){e.props.updateDeliveryFee(e.formatCurrencyString(e.props.receipt.deliveryFee,t.target.value))},size:"large",placeholder:"$ 0.00",suffix:Object(a.jsx)(N.a,{}),className:"mb-15 max-w-300"}),Object(a.jsx)(T,{level:5,children:"Service Fee"}),Object(a.jsx)(m.a,{value:this.props.receipt.serviceFee.toString(),onChange:function(t){e.props.updateServiceFee(e.formatCurrencyString(e.props.receipt.serviceFee,t.target.value))},size:"large",placeholder:"$ 0.00",suffix:Object(a.jsx)(N.a,{}),className:"mb-15 max-w-300"})]})}}]),r}(i.a.Component),z=r(237),A=h.a.Title,$=[{title:"Orderer",dataIndex:"orderer",key:"orderer"},{title:"Share of Total",dataIndex:"shareOfTotal",key:"shareOfTotal"}],B=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"getMealItemTotalByOrderer",value:function(e){return this.props.receipt.mealItems.reduce((function(t,r){return r.orderer===e?t+parseFloat(D(r.cost)):t}),0)}},{key:"getSubtotal",value:function(){return this.props.receipt.mealItems.reduce((function(e,t){return e+parseFloat(D(t.cost))}),0)}},{key:"getShareTotals",value:function(){var e=this,t=(parseFloat(D(this.props.receipt.deliveryFee))+parseFloat(D(this.props.receipt.serviceFee)))/this.props.orderers.length,r=parseFloat(D(this.props.receipt.total))-(parseFloat(D(this.props.receipt.deliveryFee))+parseFloat(D(this.props.receipt.serviceFee))),a=[];return this.props.orderers.forEach((function(s){var i=e.getMealItemTotalByOrderer(s.name)/e.getSubtotal(),n=t+i*r,l={orderer:s.name,shareOfTotal:"$".concat(n.toFixed(2))};a.push(l)})),a}},{key:"render",value:function(){var e=parseFloat(D(this.props.receipt.total)),t=parseFloat(D(this.props.receipt.serviceFee)),r=parseFloat(D(this.props.receipt.deliveryFee)),s=e&&t&&r,i=this.props.orderers.length,n=this.props.receipt.mealItems.length,l=e>=this.getSubtotal()+t+r,c=this.props.receipt.mealItems.every((function(e){return parseFloat(D(e.cost))}));return s&&i&&c&&n&&l?Object(a.jsxs)("div",{style:{paddingBottom:"30px"},children:[Object(a.jsx)(A,{children:"Your splits"}),Object(a.jsx)(F.a,{columns:$,dataSource:this.getShareTotals(),pagination:!1,className:"mb-15"})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)(A,{level:2,children:"No splits to show"}),Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:Object(a.jsx)("span",{style:{margin:"auto",fontSize:"100px"},children:Object(a.jsx)(z.a,{})})})]})}}]),r}(i.a.Component),E=r(226),V=r(238),R=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).getRandomOrdererColor=function(){var e=["#ff8519","#07d907","#c904db","#fa0c34","#0cfae2","#ff1979"];return e[Math.floor(Math.random()*e.length)]},a.addOrderer=function(e){var t=!!a.state.orderers.find((function(t){return t.name===e})),r=""===e;if(t)C.b.error("Orderers must be unique.");else if(r)C.b.error("Orderer is required.");else{var s=a.state.orderers;s.push({name:e,color:a.getRandomOrdererColor()}),a.setState({orderers:s})}},a.deleteOrderer=function(e){var t=a.state.orderers,r=t[e];t.splice(e,1),a.setState({orderers:t});var s=a.state.receipt.mealItems,i=[];s.forEach((function(e,t){e.orderer===r.name&&i.push(t)})),i.reverse().forEach((function(e){s.splice(e,1)}));var n=a.state.receipt;n.mealItems=s,a.setState({receipt:n})},a.updateTotal=function(e){var t=a.state.receipt;t.total=e,a.setState({receipt:t})},a.updateDeliveryFee=function(e){var t=a.state.receipt;t.deliveryFee=e,a.setState({receipt:t})},a.updateServiceFee=function(e){var t=a.state.receipt;t.serviceFee=e,a.setState({receipt:t})},a.addMealItem=function(e){var t=a.state.receipt.mealItems;t.push(e);var r=a.state.receipt;r.mealItems=t,a.setState({receipt:r})},a.deleteMealItem=function(e){var t=a.state.receipt.mealItems;t.splice(e,1);var r=a.state.receipt;r.mealItems=t,a.setState({receipt:r})},a.state={receipt:{mealItems:[],deliveryFee:"",serviceFee:"",total:""},orderers:[]},a}return Object(o.a)(r,[{key:"render",value:function(){return Object(a.jsxs)(E.a,{children:[Object(a.jsxs)(E.a.Header,{className:"white fs-30",children:[Object(a.jsx)(V.a,{spin:!0}),"   ","Uber Eats Bill Splitter"]}),Object(a.jsx)(E.a,{children:Object(a.jsxs)(E.a.Content,{className:"main-content",children:[Object(a.jsx)(g,{orderers:this.state.orderers,addOrderer:this.addOrderer,deleteOrderer:this.deleteOrderer}),Object(a.jsx)(U,{updateServiceFee:this.updateServiceFee,updateDeliveryFee:this.updateDeliveryFee,updateTotal:this.updateTotal,addMealItem:this.addMealItem,deleteMealItem:this.deleteMealItem,orderers:this.state.orderers,receipt:this.state.receipt}),Object(a.jsx)(B,{receipt:this.state.receipt,orderers:this.state.orderers})]})})]})}}]),r}(i.a.Component);l.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(R,{})}),document.getElementById("root"))}},[[224,1,2]]]);
//# sourceMappingURL=main.8858ccbc.chunk.js.map